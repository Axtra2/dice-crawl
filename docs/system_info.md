# Часть дизайн документа

## Общие сведения о системе

Данный документ рассматривает dice-crawl — roguelike игру с консольной графикой, где игрок управляет [Персонажем](#персонаж), путешествующим по случайно сгенерированному подземелью, представляющему набор соединённых между собой [Комнат](#комната).
Игровой процесс включает в себя исследование комнат, [Сражение](#сражение) с [Мобами](#моб), сбор [Предметов](#предмет) и снаряжения.
Персонаж имеет инвентарь и характеристики, на которые может влиять надетое снаряжение, найденное в комнатах.

## Комната

Прямоугольный набор [Тайлов](#тайл), высота и ширина которого — нечётные натуральные числа, ограниченный по краям тайлом типа стена.
Из каждой комнаты существует минимум один проход в следующую комнату, находящуюся на следующем отрезке [Карты](#карта). 
Сами проходы могут быть расположены только в середине стены.

## Карта

Представляет собой набор последовательно соединённых слоёв из [Комнат](#комната).
В самом начале существует начальный слой, состоящий из одной комнаты, в которой появляется [Персонаж](#персонаж).

Каждая комната имеет как минимум один вход в себя с предыдущего слоя и как минимум один выход в следующий слой.
Возможно только продвижение в следующие слои. Возврат в предыдущие невозможен.

## Тайл

Представляет единицу размера в игре. Тайлов может быть несколько видов

- Стены — неразрушаемые препятствия, через которые невозможно пройти игроку. Представляют ограничения [Комнат](#комната)
- Камни — неразрушаемые препятствия, находящиеся внутри комнат. Через них также, как и через стены нельзя пройти
- Пол — пустой тайл, на котором может находиться не более одного живого существа. При попытке двух существ встать на одну клетку, происходит [Сражение](#сражение). На полу также может находиться [Предмет](#предмет)
- Проход —  связывает текущую комнату с соседней. Всего таких прохода возможно четыре — северный, восточный, южный и западный, по одному со своей стороны комнаты.

## Предмет

Предмет позволяет персонажу улучшать свои характеристики. Они могут быть найдены на Тайле типа Пол и перемещены в инвентарь, с дальнейшей возможностью надеть на Персонажа. Типы предметов:

- Оружие — усиливает Атаку.
- Броня — увеличивает Защиту.

## Моб

Неигровой персонаж, управляемый некоторым внутриигровым поведением, чаще всего ИИ.
Обладает теми же характеристиками что и [Персонаж](#персонаж)

## Дайс

Обобщённая игральная кость. Является случайным выбором из фиксированного списка альтернатив

### Бросок дайса

Случайный выбор одной из альтернатив, предоставляемых дайсом

### Дайс-предмет

Оружие ([Предмет](#предмет)), которое персонаж может экипировать. Являет собой дайс, на гранях которого находятся преобразования (Int -> Int),
применяемые к значению броска [базового дайса](#базовый-дайс) игрока при атаке.

### Базовый дайс

Основная [характеристика](#характеристики) персонажа. Являет собой дайс с измеянемым числом граней (изначально 6), на которых находится целое неотрицательное число. Количество граней и значения чисел на базовом дайсе могут изменяться при повышении [уровня](#уровень-и-опыт).

## Персонаж

Это главный игровой объект, управляемый игроком. Персонаж обладает различными характеристиками

### Характеристики

- Здоровье — определяет количество урона, которое персонаж может выдержать до наступления [Конца игры](#конец-игры)
- Максимальное здоровье — определяет максимальный уровень здоровья, которым может обладать персонаж
- Базовый дайс - бросок этого [дайса](#базовый-дайс) определяет успешность атаки и защиты игрока

### Инвентарь

- Персонаж может носить с собой [Предметы](#предмет), найденные в [Комнатах](#комната)
- Персонаж имеет ячейки снаряжения для экипировки различных предметов, такие как оружие или броня.
- Надетые предметы изменяют характеристику и перемещаются из инвентаря в ячейку, в которую данный предмет может быть помещён.
- Нельзя в одну ячейку поместить более одного предмета.

### Уровень и опыт
- При убийстве персонажем моба персонаж получает колчиество опыта, зависящее от вида убитого моба
- При преодолении заданного порога опыта игрок получает новый уровень, в результате чего игрок выбирает одну из опций:
    - Увеличить свой параметр максимального здоровья
    - Увеличить значение на одной из граней базового дайса

## Сражение

Сражение
Сражение — процесс, осуществляемый когда два живых существа пытаются встать на один и тот же [Тайл](#тайл). В таком случае два существа наносят удар друг по другу, изменяя характеристику здоровья с учётом всех эффектов и характеристик.
Порядок удара определяется также как [порядок Хода](#порядок-хода).
Если сражается два одинаковых типа существ, порядок не определён.

## Ход

Базовая временная единица игры. Вся игровая логика выполняется для хода, после чего ожидает следующего хода, совершая тем самым пошаговое выполнение логики.
Ход происходит при любых активных действиях игрока

- Надевание или снятие предмета в ячейках снаряжения
- Любое успешное передвижение игрока
- Взаимодействие с [Тайлами](#тайл), будь то поднятие предмета или прохождение в другую комнату
Любые другие действия не считаются ходом, и не продвигают игровую логику.

### Порядок хода
Порядок хода задаёт порядок происходящих событий по типам сущностей — кто первый ударит, кто первый встанет на клетку. Сущности указаны в порядке убывания приоритета хода

- [Персонаж](#персонаж)
- [Моб](#моб)

## Конец игры
При наступлении данного этапа игра считается завершённой. Происходит создание нового случайного подземелья, весь прогресс игрока, будь то накопленные и одетые предметы или количество убитых противников обнуляется. Сам игрок появляется в одной из [Комнат](#комната)
